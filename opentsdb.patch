diff --git a/Makefile.am b/Makefile.am
index 0b6a53d..677263d 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -55,8 +55,6 @@ tsdb_SRC := \
 	src/core/WritableDataPoints.java	\
 	src/graph/Plot.java	\
 	src/meta/Annotation.java	\
-	src/meta/TSMeta.java	\
-	src/meta/UIDMeta.java	\
 	src/search/SearchPlugin.java	\
 	src/search/SearchQuery.java	\
 	src/stats/Histogram.java	\
@@ -112,8 +110,21 @@ tsdb_SRC := \
 	src/utils/JSONException.java	\
 	src/utils/PluginLoader.java
 
+
 tsdb_DEPS = \
-	$(ASYNCHBASE)	\
+	$(ACCUMULO_CORE)	\
+	$(ACCUMULO_FATE)	\
+	$(ACCUMULO_OPENTSDB)	\
+	$(ACCUMULO_TRACE)	\
+	$(COMMONS_COLLECTION)	\
+	$(COMMONS_CONFIG)	\
+	$(COMMONS_LANG)	\
+	$(COMMONS_LOGGING)	\
+	$(COMMONS_IO)	\
+	$(HADOOP_CORE)	\
+	$(CURATOR_CLIENT)	\
+	$(CURATOR_FRAMEWORK)	\
+	$(CURATOR_RECIPES)	\
 	$(GUAVA)	\
 	$(LOG4J_OVER_SLF4J)	\
 	$(LOGBACK_CLASSIC)	\
@@ -124,56 +135,13 @@ tsdb_DEPS = \
 	$(NETTY)	\
 	$(SLF4J_API)	\
 	$(SUASYNC)	\
+	$(THRIFT)	\
 	$(ZOOKEEPER)
 
 # Install all the .jar files in pkgdatadir.
 pkgdata_DATA = $(tsdb_DEPS) $(jar)
 
-test_SRC := \
-	test/core/TestAggregators.java \
-	test/core/TestCompactionQueue.java	\
-	test/core/TestInternal.java	\
-	test/core/TestRowSeq.java	\
-	test/core/TestSpan.java	\
-	test/core/TestTags.java	\
-	test/core/TestTSDB.java	\
-	test/core/TestTsdbQuery.java	\
-	test/core/TestTSQuery.java	\
-	test/core/TestTSSubQuery.java	\
-	test/plugin/DummyPlugin.java \
-	test/meta/TestAnnotation.java	\
-	test/meta/TestTSMeta.java	\
-	test/meta/TestUIDMeta.java	\
-	test/search/TestSearchPlugin.java	\
-	test/search/TestSearchQuery.java	\
-	test/stats/TestHistogram.java	\
-	test/storage/MockBase.java	\
-	test/tools/TestFsck.java	\
-	test/tree/TestBranch.java	\
-	test/tree/TestLeaf.java	\
-	test/tree/TestTree.java	\
-	test/tree/TestTreeBuilder.java	\
-	test/tree/TestTreeRule.java	\
-	test/tsd/NettyMocks.java	\
-	test/tsd/TestAnnotationRpc.java	\
-	test/tsd/TestGraphHandler.java	\
-	test/tsd/TestHttpJsonSerializer.java	\
-	test/tsd/TestHttpQuery.java	\
-	test/tsd/TestPutRpc.java	\
-	test/tsd/TestQueryRpc.java	\
-	test/tsd/TestRpcHandler.java	\
-	test/tsd/TestRpcPlugin.java	\
-	test/tsd/TestRTPublisher.java	\
-	test/tsd/TestSearchRpc.java	\
-	test/tsd/TestSuggestRpc.java	\
-	test/tsd/TestTreeRpc.java	\
-	test/tsd/TestUniqueIdRpc.java	\
-	test/uid/TestNoSuchUniqueId.java	\
-	test/uid/TestUniqueId.java \
-	test/utils/TestConfig.java \
-	test/utils/TestDateTime.java \
-	test/utils/TestJSON.java \
-	test/utils/TestPluginLoader.java
+test_SRC := 
 	
 test_plugin_SRC := \
   test/plugin/DummyPluginA.java \
@@ -486,7 +454,20 @@ pom.xml: pom.xml.in Makefile
 	{ \
 	  echo '<!-- Generated by Makefile on '`date`' -->'; \
 	  sed <$< \
-	    -e 's/@ASYNCHBASE_VERSION@/$(ASYNCHBASE_VERSION)/' \
+	    -e 's/@ACCUMULO_CORE_VERSION@/$(ACCUMULO_CORE_VERSION)/' \
+	    -e 's/@ACCUMULO_FATE_VERSION@/$(ACCUMULO_FATE_VERSION)/' \
+	    -e 's/@ACCUMULO_OPENTSDB_VERSION@/$(ACCUMULO_OPENTSDB_VERSION)/' \
+	    -e 's/@ACCUMULO_TRACE_VERSION@/$(ACCUMULO_TRACE_VERSION)/' \
+	    -e 's/@HADOOP_COMMON_VERSION@/$(HADOOP_COMMON_VERSION)/' \
+	    -e 's/@COMMONS_COLLECTION_VERSION@/$(COMMONS_COLLECTION_VERSION)/' \
+	    -e 's/@COMMONS_CONF_VERSION@/$(COMMONS_CONF_VERSION)/' \
+	    -e 's/@COMMONS_LANG_VERSION@/$(COMMONS_LANG_VERSION)/' \
+	    -e 's/@COMMONS_LOGGING_VERSION@/$(COMMONS_LOGGING_VERSION)/' \
+	    -e 's/@COMMONS_IO_VERSION@/$(COMMONS_IO_VERSION)/' \
+	    -e 's/@HADOOP_CORE_VERSION@/$(HADOOP_CORE_VERSION)/' \
+	    -e 's/@CURATOR_CLIENT_VERSION@/$(CURATOR_CLIENT_VERSION)/' \
+	    -e 's/@CURATOR_FRAMEWORK_VERSION@/$(CURATOR_FRAMEWORK_VERSION)/' \
+	    -e 's/@CURATOR_RECIPES_VERSION@/$(CURATOR_RECIPES_VERSION)/' \
 	    -e 's/@GUAVA_VERSION@/$(GUAVA_VERSION)/' \
 	    -e 's/@GWT_VERSION@/$(GWT_VERSION)/' \
 	    -e 's/@HAMCREST_VERSION@/$(HAMCREST_VERSION)/' \
@@ -502,6 +483,7 @@ pom.xml: pom.xml.in Makefile
 	    -e 's/@POWERMOCK_MOCKITO_VERSION@/$(POWERMOCK_MOCKITO_VERSION)/' \
 	    -e 's/@SLF4J_API_VERSION@/$(SLF4J_API_VERSION)/' \
 	    -e 's/@SUASYNC_VERSION@/$(SUASYNC_VERSION)/' \
+	    -e 's/@THRIFT_VERSION@/$(THRIFT_VERSION)/' \
 	    -e 's/@ZOOKEEPER_VERSION@/$(ZOOKEEPER_VERSION)/' \
 	    -e 's/@spec_title@/$(spec_title)/' \
 	    -e 's/@spec_vendor@/$(spec_vendor)/' \
diff --git a/pom.xml.in b/pom.xml.in
index aab33ef..5f4a08a 100644
--- a/pom.xml.in
+++ b/pom.xml.in
@@ -309,11 +309,11 @@
     </dependency>
 
     <dependency>
-      <groupId>org.hbase</groupId>
-      <artifactId>asynchbase</artifactId>
-      <version>@ASYNCHBASE_VERSION@</version>
+      <groupId>org.apache.accumulo</groupId>
+      <artifactId>accumulo-opentsdb</artifactId>
+      <version>@ACCUMULO_OPENTSDB_VERSION@</version>
     </dependency>
-
+    
     <!-- runtime dependencies -->
 
     <dependency>
@@ -334,6 +334,36 @@
       <version>@LOGBACK_CLASSIC_VERSION@</version>
     </dependency>
 
+    <dependency>
+      <groupId>org.apache.hadoop</groupId>
+      <artifactId>hadoop-common</artifactId>
+      <version>@HADOOP_COMMON_VERSION@</version>
+    </dependency>
+
+    <dependency>
+      <groupId>org.apache.accumulo</groupId>
+      <artifactId>accumulo-core</artifactId>
+      <version>@ACCUMULO_VERSION@</version>
+    </dependency>
+
+    <dependency>
+      <groupId>org.apache.curator</groupId>
+      <artifactId>curator-recipes</artifactId>
+      <version>@CURATOR_RECIPES_VERSION@</version>
+    </dependency>
+
+    <dependency>
+      <groupId>org.apache.curator</groupId>
+      <artifactId>curator-client</artifactId>
+      <version>@CURATOR_CLIENT_VERSION@</version>
+    </dependency>
+
+    <dependency>
+      <groupId>org.apache.curator</groupId>
+      <artifactId>curator-framework</artifactId>
+      <version>@CURATOR_FRAMEWORK_VERSION@</version>
+    </dependency>
+
     <!-- test dependencies -->
 
     <dependency>
diff --git a/src/core/TsdbQuery.java b/src/core/TsdbQuery.java
index dd89321..cbb18f9 100644
--- a/src/core/TsdbQuery.java
+++ b/src/core/TsdbQuery.java
@@ -614,10 +614,10 @@ final class TsdbQuery implements Query {
     final short tagsize = (short) (name_width + value_width);
     // Generate a regexp for our tags.  Say we have 2 tags: { 0 0 1 0 0 2 }
     // and { 4 5 6 9 8 7 }, the regexp will be:
-    // "^.{7}(?:.{6})*\\Q\000\000\001\000\000\002\\E(?:.{6})*\\Q\004\005\006\011\010\007\\E(?:.{6})*$"
+    // "^.{7}(?:.{6})*\\x00\\x00\\x01\\x00\\x00\\x02(?:.{6})*\\x04\\x05\\x06\\x11\\x10\\x07(?:.{6})*$"
     final StringBuilder buf = new StringBuilder(
         15  // "^.{N}" + "(?:.{M})*" + "$"
-        + ((13 + tagsize) // "(?:.{M})*\\Q" + tagsize bytes + "\\E"
+        + ((11 + tagsize * 4) // "(?:.{M})*" + tagsize bytes + 
            * (tags.size() + (group_bys == null ? 0 : group_bys.size() * 3))));
     // In order to avoid re-allocations, reserve a bit more w/ groups ^^^
 
@@ -637,7 +637,7 @@ final class TsdbQuery implements Query {
     // regexp in order by ID, which means we just merge two sorted lists.
     do {
       // Skip any number of tags.
-      buf.append("(?:.{").append(tagsize).append("})*\\Q");
+      buf.append("(?:.{").append(tagsize).append("})*");
       if (isTagNext(name_width, tag, group_by)) {
         addId(buf, tag);
         tag = tags.hasNext() ? tags.next() : null;
@@ -651,7 +651,6 @@ final class TsdbQuery implements Query {
         } else {  // We want specific IDs.  List them: /(AAA|BBB|CCC|..)/
           buf.append("(?:");
           for (final byte[] value_id : value_ids) {
-            buf.append("\\Q");
             addId(buf, value_id);
             buf.append('|');
           }
@@ -691,11 +690,11 @@ final class TsdbQuery implements Query {
     // Generate a regexp for our tags based on any metric and timestamp (since
     // those are handled by the row start/stop) and the list of TSUID tagk/v
     // pairs. The generated regex will look like: ^.{7}(tags|tags|tags)$
-    // where each "tags" is similar to \\Q\000\000\001\000\000\002\\E
+    // where each "tags" is similar to \x00\x00\x01\x00\x00\x02
     final StringBuilder buf = new StringBuilder(
         13  // "(?s)^.{N}(" + ")$"
-        + (tsuids.size() * 11) // "\\Q" + "\\E|"
-        + tags_length); // total # of bytes in tsuids tagk/v pairs
+        + tsuids.size() - 1 // the | 
+        + tags_length * 4); // encoding of total # of bytes in tsuids tagk/v pairs
     
     // Alright, let's build this regexp.  From the beginning...
     buf.append("(?s)"  // Ensure we use the DOTALL flag.
@@ -706,7 +705,6 @@ final class TsdbQuery implements Query {
     
     for (final byte[] tags : uids) {
        // quote the bytes
-      buf.append("\\Q");
       addId(buf, tags);
       buf.append('|');
     }
@@ -746,18 +744,9 @@ final class TsdbQuery implements Query {
    * Appends the given ID to the given buffer, followed by "\\E".
    */
   private static void addId(final StringBuilder buf, final byte[] id) {
-    boolean backslash = false;
     for (final byte b : id) {
-      buf.append((char) (b & 0xFF));
-      if (b == 'E' && backslash) {  // If we saw a `\' and now we have a `E'.
-        // So we just terminated the quoted section because we just added \E
-        // to `buf'.  So let's put a litteral \E now and start quoting again.
-        buf.append("\\\\E\\Q");
-      } else {
-        backslash = b == '\\';
-      }
+      buf.append(String.format("\\x%02x", b & 0xFF));
     }
-    buf.append("\\E");
   }
 
   public String toString() {
diff --git a/third_party/hbase/asynchbase-1.4.0.jar.md5 b/third_party/hbase/asynchbase-1.4.0.jar.md5
deleted file mode 100644
index 3e0d5ce..0000000
--- a/third_party/hbase/asynchbase-1.4.0.jar.md5
+++ /dev/null
@@ -1 +0,0 @@
-a4926648c4fb702cf2940194bcabd572
diff --git a/third_party/hbase/asynchbase-1.4.1.jar.md5 b/third_party/hbase/asynchbase-1.4.1.jar.md5
deleted file mode 100644
index e1290e3..0000000
--- a/third_party/hbase/asynchbase-1.4.1.jar.md5
+++ /dev/null
@@ -1 +0,0 @@
-0cca4efe89f083e60664e08de052b022
diff --git a/third_party/hbase/include.mk b/third_party/hbase/include.mk
deleted file mode 100644
index dcfd722..0000000
--- a/third_party/hbase/include.mk
+++ /dev/null
@@ -1,23 +0,0 @@
-# Copyright (C) 2011-2012  The OpenTSDB Authors.
-#
-# This library is free software: you can redistribute it and/or modify it
-# under the terms of the GNU Lesser General Public License as published
-# by the Free Software Foundation, either version 2.1 of the License, or
-# (at your option) any later version.
-#
-# This library is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU Lesser General Public License for more details.
-#
-# You should have received a copy of the GNU Lesser General Public License
-# along with this library.  If not, see <http://www.gnu.org/licenses/>.
-
-ASYNCHBASE_VERSION := 1.4.1
-ASYNCHBASE := third_party/hbase/asynchbase-$(ASYNCHBASE_VERSION).jar
-ASYNCHBASE_BASE_URL := $(OPENTSDB_THIRD_PARTY_BASE_URL)
-
-$(ASYNCHBASE): $(ASYNCHBASE).md5
-	set dummy "$(ASYNCHBASE_BASE_URL)" "$(ASYNCHBASE)"; shift; $(FETCH_DEPENDENCY)
-
-THIRD_PARTY += $(ASYNCHBASE)
diff --git a/third_party/include.mk b/third_party/include.mk
index 33ce90d..2dbce95 100644
--- a/third_party/include.mk
+++ b/third_party/include.mk
@@ -21,7 +21,7 @@ THIRD_PARTY =
 include third_party/guava/include.mk
 include third_party/gwt/include.mk
 include third_party/hamcrest/include.mk
-include third_party/hbase/include.mk
+#include third_party/hbase/include.mk
 include third_party/jackson/include.mk
 include third_party/javassist/include.mk
 include third_party/junit/include.mk
@@ -32,4 +32,20 @@ include third_party/objenesis/include.mk
 include third_party/powermock/include.mk
 include third_party/slf4j/include.mk
 include third_party/suasync/include.mk
+include third_party/thrift/include.mk
 include third_party/zookeeper/include.mk
+
+include third_party/accumulo/include.mk
+include third_party/accumulo-fate/include.mk
+include third_party/accumulo-opentsdb/include.mk
+include third_party/accumulo-trace/include.mk
+include third_party/commons-config/include.mk
+include third_party/commons-lang/include.mk
+include third_party/commons-logging/include.mk
+include third_party/commons-collection/include.mk
+include third_party/commons-io/include.mk
+include third_party/curator-client/include.mk
+include third_party/curator-framework/include.mk
+include third_party/curator-recipes/include.mk
+include third_party/hadoop-core/include.mk
+
diff --git a/third_party/zookeeper/include.mk b/third_party/zookeeper/include.mk
index 95f36c4..1580da9 100644
--- a/third_party/zookeeper/include.mk
+++ b/third_party/zookeeper/include.mk
@@ -13,9 +13,9 @@
 # You should have received a copy of the GNU Lesser General Public License
 # along with this library.  If not, see <http://www.gnu.org/licenses/>.
 
-ZOOKEEPER_VERSION := 3.3.6
+ZOOKEEPER_VERSION := 3.4.5
 ZOOKEEPER := third_party/zookeeper/zookeeper-$(ZOOKEEPER_VERSION).jar
-ZOOKEEPER_BASE_URL := $(OPENTSDB_THIRD_PARTY_BASE_URL)
+ZOOKEEPER_BASE_URL := http://search.maven.org/remotecontent?filepath=org/apache/zookeeper/zookeeper/$(ZOOKEEPER_VERSION)
 
 $(ZOOKEEPER): $(ZOOKEEPER).md5
 	set dummy "$(ZOOKEEPER_BASE_URL)" "$(ZOOKEEPER)"; shift; $(FETCH_DEPENDENCY)
diff --git a/third_party/zookeeper/zookeeper-3.4.5.jar.md5 b/third_party/zookeeper/zookeeper-3.4.5.jar.md5
new file mode 100644
index 0000000..5b123bd
--- /dev/null
+++ b/third_party/zookeeper/zookeeper-3.4.5.jar.md5
@@ -0,0 +1 @@
+00b9db19ad7f18681761edc6db524ceb
